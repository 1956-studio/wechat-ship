<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="/static/scripts/main.js"></script>
    <script type="text/javascript" src="/static/plugin/nprogress/nprogress.js"></script>
    <script type="text/javascript" src="/static/plugin/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/static/plugin/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/plugin/codemirror/lib/codemirror.js"></script>
    <script type="text/javascript" src="/static/plugin/codemirror/addon/display/fullscreen.js"></script>
    <script type="text/javascript" src="/static/plugin/codemirror/mode/javascript/javascript.js"></script>
    <script type="text/javascript" src="/static/plugin/bootstrap.growl/bootstrap-growl.min.js"></script>

    <link rel='stylesheet' href='/static/plugin/nprogress/nprogress.css'>
    <link rel="stylesheet" href="/static/plugin/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/plugin/bootstrap/dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/static/plugin/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="/static/plugin/codemirror/addon/display/fullscreen.css">
    <link rel="stylesheet" href="/static/plugin/codemirror/theme/monokai.css">

    <script>
	function to(url){
		NProgress.start();
		$.ajax({
			url:url, 
			success: function(data){
				$("#body").html("");
				$("#body").html(data);
				NProgress.done();
			},
			error: function (error) {
				console.log(error);
				$.growl({
					title: '\tNO SUCH PAGE FOUND',
					icon: "glyphicon glyphicon-remove",
				}, {
					type: 'danger',
					delay: 3000
				});
				NProgress.done();
			}
		});
	}
	
	// argument: 
	// option1: subform(formId)
	// option2: subform(formId, renderId)
	// option3: subform(formId, action, method)
	// option4: subform(formId, renderId, action, method)
	function subform () {
		var formId, renderId, action, method;
		renderId = "body";	// default value
		if(arguments.length == 1) {
			formId = arguments[0];
		}else if(arguments.length == 2) {
			formId = arguments[0];
			renderId = arguments[1];
		}else if(arguments.length == 3) {
			formId = arguments[0];
			action = arguments[1];
			method = arguments[2];
		}else if(arguments.length == 4) {
			formId = arguments[0];
			renderId = arguments[1];
			action = arguments[3];
			method = arguments[4];
		}else {
			$.growl({
					title: '\tSYSTEM ERROR',
					icon: "glyphicon glyphicon-remove",
				}, {
					type: 'info',
					delay: 3000
			});
			return;	//error
		}
		NProgress.start();
		if(document.getElementById("code") != null){
			$('#code').html(editor.getValue());
		}
		$.ajax({
			type: method || $("#"+formId).attr("method"),
			url: action || $("#"+formId).attr("action"),
			data: $("#"+formId).find('input, select, textarea, button').serialize(),
			success: function (data) {
				$("#" + renderId).html("");
				$("#" + renderId).html(data);
				$.growl({
					title: '\tEXECUTE SUCCESS',
					icon: "glyphicon glyphicon-ok",
				}, {
					type: 'info',
					delay: 3000
				});
				NProgress.done();
			},
			error: function (error) {
				console.log(error);
				$.growl({
					title: '\tEXECUTE ERROR',
					icon: "glyphicon glyphicon-remove",					
				}, {
					type: 'danger',
					delay: 3000
				});
				NProgress.done();
			}
		});
	}
	</script>
    <title>Example App</title>
</head>
<body>

   
welcome: {{user.username}}

<a href="/logout">logout</a>

<ul>
	<li><a href="#" onclick="to('/regex');">regex</a></li>
	<li><a href="#" onclick="to('/list');">list</a></li>
	<li><a href="#" onclick="to('/logs');">logs</a></li>
	<li><a href="#" onclick="to('/server')">server</a></li>
	<li><a href="#" onclick="to('/test')">test</a></li>
</ul>

<div id='body'> </div>

</body>
</html>